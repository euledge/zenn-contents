---
title: "Javaã‚¯ãƒ©ã‚¹ã‹ã‚‰PlantUML/Mermaidå›³ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹Gradleãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’åˆã‚ã¦ä½œã£ãŸè©±ï¼ˆCode Atlasï¼‰"
emoji: "ğŸ—ºï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Gradle", "Java", "PlantUML", "Mermaid", "ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£"]

published: false
---
# Code Atlasã¨ã¯ï¼Ÿ

Code Atlas Gradle Plugin ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®**ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ¸ˆã¿Javaã‚¯ãƒ©ã‚¹**ã‚’èµ°æŸ»ã—ã€mermaidã‚„plantUMLã®å½¢å¼ã§ã‚¯ãƒ©ã‚¹å›³ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
:::message
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã€è¨­å®šã—ã¦ãã ã•ã„ã€‚
(2025/12/13 æ™‚ç‚¹ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯1.1.0)
:::

æœ€æ–°ã®ãƒªãƒªãƒ¼ã‚¹æƒ…å ±ã¯[ã“ã¡ã‚‰](https://github.com/euledge/code-atlas/blob/main/docs/RELEASE_NOTES_JA.md)

## ãªãœä½œã£ãŸã‹

- è¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆã®å ´é¢ã§ã€**æœ€æ–°ã®ã‚¯ãƒ©ã‚¹å›³ãŒæ¬²ã—ã„**ãŒã€æ‰‹ä½œæ¥­ã ã¨ã™ãé™³è…åŒ–ã—ã¦ã—ã¾ã†ã€‚
- CIã§ãƒ“ãƒ«ãƒ‰ã—ã¦ã„ã‚‹ãªã‚‰ã€**ãƒ“ãƒ«ãƒ‰æˆæœï¼ˆ.classï¼‰ã‹ã‚‰è§£æ**ã™ã‚Œã°ã€ã‚½ãƒ¼ã‚¹æ§‹æ–‡å·®ç•°ã‚„ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†å¾Œã®å§¿ã«è¿‘ã„å›³ãŒå¾—ã‚‰ã‚Œã‚‹ã€‚
- å‡ºåŠ›å½¢å¼ã¯ã€**PlantUML**ã¨**Mermaid**ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„Wikiã®æ—¢å­˜è³‡ç”£ã‚’æ´»ã‹ã—ãŸã„ã€‚

[Jig](https://github.com/dddjava/jig)ã‚„[SpringBoot Modulith](https://spring.pleiades.io/projects/spring-modulith)ã«ã‚‚ã‚¯ãƒ©ã‚¹å›³ç”Ÿæˆã®æ©Ÿèƒ½ã¯ã‚ã‚Šã€ã¯ã˜ã‚ã¯ã“ã‚Œã‚’ä½¿ç”¨ã—ã‚ˆã†ã¨æ€ã£ã¦ã„ãŸã®ã§ã™ãŒã€JIGã§ã¯PlantUMLã‚„mermaidã§ã®å‡ºåŠ›ãŒã§ããšã€SpringBoot Modulithã§ã¯åˆ¥é€”package-info.javaã®è¨˜è¿°ãŒå¿…è¦ã§ã‚ã£ãŸã‚Šã€ã‚¯ãƒ©ã‚¹å›³ãŒæ¬²ã—ã„ã¨ã„ã†ã ã‘ã®ãƒ‹ãƒ¼ã‚ºã«ãŠã„ã¦ã¯ä½¿ã„ãšã‚‰ã„ãªã¨æ€ã„ã¾ã—ãŸã€‚
ãã“ã§è‡ªåˆ†ãŒå¿…è¦ã¨ã™ã‚‹æœ€å°é™ã®ãƒ‹ãƒ¼ã‚ºã‚’ç°¡å˜ã«å®Ÿç¾ã—ãŸã„ã¨ã®æ€ã„ã§ä»Šå›ãƒ„ãƒ¼ãƒ«ã®ä½œæˆã‚’æ€ã„ç«‹ã¡ã¾ã—ãŸã€‚

## Code Atlas æ¦‚è¦

Code Atlas Gradle Plugin ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®**ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ¸ˆã¿Javaã‚¯ãƒ©ã‚¹**ã‚’èµ°æŸ»ã—ã€ä»¥ä¸‹ã®å½¢å¼ã§ã‚¯ãƒ©ã‚¹å›³ã‚’ç”Ÿæˆã—ã¾ã™ï¼š

- **PlantUML** (`.puml`)
[Plant UML Editor](https://editor.plantuml.com/uml/SoWkIImgAStDuULApaaiBbP8pi_LIwr8p2t8ITKhXb1E2jMyN0f0eArGbf-Pef2I7voVcrgIaPcNhg79orMBHwiZI2j80JOfFJqxhDRXCSy5uPJWaYAW0nJIYr9JIpGW70AESSRd69iQNLsich2gTyRdU1AKE-9nhYk6NmjAat8oazqoKtDIq4CXjIG08GcA5KA1X2riRMhqzB2w1AjwLroUSk7bSaZDIm4dAW00) ã«ã¦è¡¨ç¤ºç¢ºèªæ¸ˆ
- **Mermaid** (`.mmd`)  
[Mermaid Live Editor](https://mermaid.live/edit#pako:eNqVUlFPwjAQ_ivLPWHEpmV2Yw0xQcBnE97MXupax-LaLl1nUNh_d2ygMRkO7qW9fvfdfXfXHSRGSGCQ5LwslxlPLVex9hprX7zEKCS3XBW5RGV3PHq7LuJgtx8mE54wa6Ok22Q6Hd10YD2QZX7EexAPoYfewgMpl3-ErZ1t5HipldKNOudCaYt_pM32d3fXcRZD7VxBmQ8oX_VNoKhe8yx5ymQuesYj3fMvflrehQPsW8Fsj1CvtLOc1blul7GGMaQ2E8CcreQYlLSKH1xo-4zBbaSSMbDmKrh9jyHWdcMpuH4xRp1o1lTpBtgbz8vGqwrBnTz-9Z8QqYW0C1NpB4y2GYDtYAuM4CkilIYTTKiPI9yAn8AigvyI0CAKcUCxfx_UY_hqS2I0Jdin_iSMCPHDIKL1NxPMFwk) ã«ã¦Mermaid version 11.12.0ã§è¡¨ç¤ºç¢ºèªæ¸ˆ

### ç”Ÿæˆã•ã‚ŒãŸmermaidå›³

```mermaid
classDiagram
    class B {
        +void doSomething()
    }
    class A
    A ..> B
    class D {
        +String greet(String)
    }
    class C
    A <|-- C
    C ..> B
    C ..> A
    class E {
        +String publicField
        +String getPublicField()
        +String greet(String)
    }
    D <|.. E
    E ..> D
```

ç”Ÿæˆã—ãŸå›³ã¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ä¾å­˜é–¢ä¿‚ã€ç¶™æ‰¿ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹å®Ÿè£…ã®å¯è¦–åŒ–ã«å½¹ç«‹ã¡ã¾ã™ã€‚

å†…éƒ¨ã§ã¯ **ClassGraph** ã‚’ç”¨ã„ãŸã‚¯ãƒ©ã‚¹ãƒ‘ã‚¹èµ°æŸ»ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚ï¼ˆJava 21 / Gradle 8.5+ ã‚’è¦ä»¶ï¼‰


## å°å…¥æ–¹æ³•

`build.gradle.kts` ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```kotlin
plugins {
    id("io.github.euledge.code-atlas") version "1.0.0"
}
```

## ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®š

ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®šï¼ˆå‡ºåŠ›å…ˆã‚„å¯¾è±¡ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã©ï¼‰ã¯æ‹¡å¼µãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§æŒ‡å®šã§ãã¾ã™ï¼š

``` kotlin
codeAtlas {
    formats.set(listOf("plantuml", "mermaid")) // å‡ºåŠ›å½¢å¼ï¼ˆè¤‡æ•°å¯ï¼‰
    outputDir.set("docs/diagrams")             // å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
}
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä¸€è¦§

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å | ä¾‹ | èª¬æ˜ |
|---|---|---|
| `formats` | `plantuml,mermaid` | ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä¸€è¦§ã€‚ |
| `outputDir` | `reports/diagrams` | å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ã€‚ |
| `rootPackages` |  `com.example.domain,com.example.infrastructure` | ã‚¯ãƒ©ã‚¹ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ä¸€è¦§ã€‚ |
| `showDetails` | `true` ã¾ãŸã¯ `false` | `true`ã®å ´åˆã€å…¬é–‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å›³ã«å«ã‚ã¾ã™ã€‚ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `false`ï¼‰ |

## ä½¿ã„æ–¹

è¨­å®šã•ã‚ŒãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«å¾“ã£ã¦ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§å›³ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

```bash
./gradlew generateDiagrams
```

## ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã®ä¸Šæ›¸ã
CIã‚„ä¸€æ™‚çš„ãªå‡ºåŠ›åˆ‡ã‚Šæ›¿ãˆã«ä¾¿åˆ©ã§ã™ã€‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯Gradleã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ä¸Šæ›¸ãã§ãã¾ã™ï¼š

```bash
./gradlew generateDiagrams \
  --project-prop formats=plantuml,mermaid \
  --project-prop outputDir=reports/diagrams \
  --project-prop rootPackages=com.example.domain,com.example.infrastructure \
  --project-prop showDetails=true
```

ã¾ãŸã¯ã€`-P` Windowsã§ã¯ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™:
```sh
./gradlew generateDiagrams \
-P"formats=plantuml,mermaid" \ 
-P"outputDir=reports/diagrams" \ 
-P"rootPackages=com.example.domain,com.example.infrastructure" \ 
-P"showDetails=true"
```

# é–‹ç™ºã®ãƒã‚¤ãƒ³ãƒˆ

ä¾å­˜é–¢ä¿‚ã®è§£æã«ãŠã„ã¦æœ€ã‚‚é‡è¦ãªå½¹å‰²ã‚’æœãŸã—ãŸã®ãŒ **ClassGraph** ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­˜åœ¨ã§ã™ã€‚

[ClassGraph](https://github.com/classgraph/classgraph) ã¯ã€Java ã®ã‚¯ãƒ©ã‚¹ãƒ‘ã‚¹ã‚’é«˜é€Ÿã«èµ°æŸ»ã—ã€ã‚¯ãƒ©ã‚¹æƒ…å ±ãƒ»ä¾å­˜é–¢ä¿‚ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚
å¾“æ¥ã® ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ ã ã‘ã§ã¯å–å¾—ã§ããªã„ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®Ÿè£…é–¢ä¿‚ã€å¤–éƒ¨ã‚¯ãƒ©ã‚¹ã®ä¾å­˜ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ± ãªã©ã‚’ãƒ¯ãƒ³ãƒ‘ã‚¹ã§å–å¾—ã§ãã¾ã™ã€‚

å›³ã®ç”Ÿæˆã«ã¤ã„ã¦ã¯ã€ä»Šå›ã¯ã‚¯ãƒ©ã‚¹å›³ã®ã¿ã¨ã„ã†è¦ä»¶ã§ã€mermaidã‚„plantUMLã®è¨˜æ³•ãŒã‚·ãƒ³ãƒ—ãƒ«ã§å¤‰æ›´ãŒèµ·ãã«ãã„ã‚‚ã®ã¨ã„ã†ç†ç”±ã§ç‰¹ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ãšå˜ç´”ãªæ–‡å­—åˆ—ç”Ÿæˆã§è¡Œã„ã¾ã—ãŸã€‚

ã‚µãƒ³ãƒ—ãƒ«ã®ç°¡å˜ãªã‚¯ãƒ©ã‚¹ã§ã¯ã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã§ã™ãŒã€æ¥­å‹™ã§ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚¯ãƒ©ã‚¹å›³ã‚’å‡ºåŠ›ã—ãŸã¨ã“ã‚ã€åç§°ã«$ãŒä»˜ãã‚¯ãƒ©ã‚¹ãŒå‡ºã¦ãã¦ã—ã¾ã„ã€mermaidã‚„plantUMLã®å‡ºåŠ›ã«å¤±æ•—ã™ã‚‹ã“ã¨ãŒèµ·ãã¾ã—ãŸã€‚
èª¿ã¹ã‚‹ã¨åˆæˆã‚¯ãƒ©ã‚¹ã€å†…éƒ¨ã‚¯ãƒ©ã‚¹ã€ãŠã‚ˆã³åŒ¿åå†…éƒ¨ã‚¯ãƒ©ã‚¹ã®ã‚ˆã†ãªã‚‚ã®ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã€å‡ºé‡ã®å¯¾è±¡ã‹ã‚‰å¤–ã™å‡¦ç†ã‚’åŠ ãˆã¾ã—ãŸã€‚

# ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒ»ãƒªãƒã‚¸ãƒˆãƒª

- MIT License

GitHub: [euledge/code-atlasï¼ˆREADMEè‹±/æ—¥ãƒ»ã‚µãƒ³ãƒ—ãƒ«ã‚ã‚Šï¼‰](https://github.com/euledge/code-atlas)
Gradle Plugin: [https://plugins.gradle.org/plugin/io.github.euledge.code-atlas](https://plugins.gradle.org/plugin/io.github.euledge.code-atlas)

# å‚è€ƒ

- [baeldung - Guide to Classgraph Library](https://www.baeldung.com/classgraph)
- Gradle å…¬å¼ã€ŒPublishing Plugins to the Gradle Plugin Portalã€[userguide/publishing_gradle_plugins](https://docs.gradle.org/current/userguide/publishing_gradle_plugins.html)
